"""Added Business_proposition table and removed cv tabel

Revision ID: f60ade77f13b
Revises: 376a5f76942a
Create Date: 2024-06-28 08:37:06.802516

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision: str = 'f60ade77f13b'
down_revision: Union[str, None] = '376a5f76942a'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('business_propositions',
    sa.Column('id_business_proposition', postgresql.UUID(as_uuid=True), nullable=False),
    sa.Column('mission_name', sa.String(), nullable=True),
    sa.Column('client', sa.String(), nullable=True),
    sa.Column('start_date', sa.DateTime(), nullable=True),
    sa.Column('end_date', sa.DateTime(), nullable=True),
    sa.Column('localisation_talan', sa.String(), nullable=True),
    sa.Column('localisation_client', sa.String(), nullable=True),
    sa.Column('number_of_workers', sa.Integer(), nullable=True),
    sa.Column('mission_length_in_month', sa.Integer(), nullable=True),
    sa.Column('number_of_in_person_meetings_per_week', sa.Integer(), nullable=True),
    sa.Column('transports', sa.ARRAY(postgresql.JSONB(astext_type=sa.Text())), nullable=True),
    sa.Column('number_of_emails_with_attachments_per_week', sa.Integer(), nullable=True),
    sa.Column('number_of_emails_without_attachments_per_week', sa.Integer(), nullable=True),
    sa.Column('hours_of_visioconference_per_week', sa.Integer(), nullable=True),
    sa.Column('camera_on', sa.Boolean(), nullable=True),
    sa.Column('computers', sa.ARRAY(postgresql.JSONB(astext_type=sa.Text())), nullable=True),
    sa.Column('phones', sa.ARRAY(postgresql.JSONB(astext_type=sa.Text())), nullable=True),
    sa.Column('storage_amount_in_terabytes', sa.Integer(), nullable=True),
    sa.Column('storage_length_in_month', sa.Integer(), nullable=True),
    sa.Column('number_of_backups', sa.Integer(), nullable=True),
    sa.Column('storage_provider', sa.String(), nullable=True),
    sa.Column('storage_location', sa.String(), nullable=True),
    sa.Column('compute_time', sa.Integer(), nullable=True),
    sa.Column('compute_provider', sa.String(), nullable=True),
    sa.Column('compute_location', sa.String(), nullable=True),
    sa.Column('compute_device', sa.String(), nullable=True),
    sa.Column('pages_printed_per_month', sa.Integer(), nullable=True),
    sa.Column('print_double_sided', sa.Boolean(), nullable=True),
    sa.PrimaryKeyConstraint('id_business_proposition')
    )
    op.drop_table('templates')
    op.drop_table('cvs')
    op.drop_column('users', 'id_manager')
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('users', sa.Column('id_manager', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.create_table('cvs',
    sa.Column('id', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('firstname', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('lastname', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('poste', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('introduction', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('missions', postgresql.ARRAY(postgresql.JSONB(astext_type=sa.Text())), autoincrement=False, nullable=True),
    sa.Column('languages', postgresql.ARRAY(postgresql.JSONB(astext_type=sa.Text())), autoincrement=False, nullable=True),
    sa.Column('educations', postgresql.ARRAY(postgresql.JSONB(astext_type=sa.Text())), autoincrement=False, nullable=True),
    sa.Column('certifications', postgresql.ARRAY(postgresql.JSONB(astext_type=sa.Text())), autoincrement=False, nullable=True),
    sa.Column('skills', postgresql.ARRAY(postgresql.JSONB(astext_type=sa.Text())), autoincrement=False, nullable=True),
    sa.Column('id_user', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('comm_languages', postgresql.JSONB(astext_type=sa.Text()), autoincrement=False, nullable=True),
    sa.Column('comm_educations', postgresql.JSONB(astext_type=sa.Text()), autoincrement=False, nullable=True),
    sa.Column('comm_certifications', postgresql.JSONB(astext_type=sa.Text()), autoincrement=False, nullable=True),
    sa.Column('comm_skills', postgresql.JSONB(astext_type=sa.Text()), autoincrement=False, nullable=True),
    sa.Column('comm_general', postgresql.JSONB(astext_type=sa.Text()), autoincrement=False, nullable=True),
    sa.Column('status', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('label', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('updated_at', postgresql.TIMESTAMP(), server_default=sa.text('now()'), autoincrement=False, nullable=False),
    sa.Column('primary_cv', sa.BOOLEAN(), autoincrement=False, nullable=True),
    sa.Column('labelsAnnotation', postgresql.JSONB(astext_type=sa.Text()), autoincrement=False, nullable=True),
    sa.Column('originalFormat', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id', name='cvs_pkey')
    )
    op.create_table('templates',
    sa.Column('id', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('name', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('type', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('fileName', sa.VARCHAR(), autoincrement=False, nullable=False),
    sa.Column('fileBlob', postgresql.BYTEA(), autoincrement=False, nullable=False),
    sa.Column('active', sa.BOOLEAN(), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id', name='templates_pkey')
    )
    op.drop_table('business_propositions')
    # ### end Alembic commands ###
